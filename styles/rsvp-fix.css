/* RSVP Form Fixes - ENHANCED VERSION
   This CSS ensures that conditional sections are properly shown/hidden based on radio selection */

/* Notification for debugging */
#rsvpForm::before {
  content: "CSS fix is active (enhanced version)";
  display: block;
  margin-bottom: 15px;
  color: #666;
  font-size: 0.8rem;
  text-align: center;
}

/* 1. Hide conditional sections by default with !important to override inline styles */
[data-depends-on="attendance"][data-show-when="yes"],
#special-message,
.mb-3:has(#guestCount),
.mb-3:has(#dietaryRestrictions),
div:has(select[name="guestCount"]),
div:has(textarea[name="dietaryRestrictions"]) {
  display: none !important;
}

/* 2. Show conditional sections when Yes radio is checked - DIRECT APPROACH */
/* Multiple selectors to cover all possible HTML structures */
input[name="attendance"][value="yes"]:checked ~ #special-message,
input[value="yes"]:checked ~ #special-message,
#attendanceYes:checked ~ #special-message,
input[value="yes"]:checked ~ div:has(#guestCount),
input[value="yes"]:checked ~ div:has(#dietaryRestrictions),
input[value="yes"]:checked ~ [data-depends-on="attendance"][data-show-when="yes"],
#attendanceYes:checked ~ div:has(#guestCount),
#attendanceYes:checked ~ div:has(#dietaryRestrictions),
#attendanceYes:checked ~ [data-depends-on="attendance"][data-show-when="yes"] {
  display: block !important;
}

/* 3. Global selector using body - this works even across distant elements */
body:has(input[name="attendance"][value="yes"]:checked) #special-message,
body:has(#attendanceYes:checked) #special-message,
body:has(input[name="attendance"][value="yes"]:checked) [data-depends-on="attendance"][data-show-when="yes"],
body:has(#attendanceYes:checked) [data-depends-on="attendance"][data-show-when="yes"],
body:has(input[name="attendance"][value="yes"]:checked) div:has(#guestCount),
body:has(#attendanceYes:checked) div:has(#guestCount),
body:has(input[name="attendance"][value="yes"]:checked) div:has(#dietaryRestrictions),
body:has(#attendanceYes:checked) div:has(#dietaryRestrictions) {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* 4. Section & form element targeting */
/* Target elements specifically by form structure */
.form-section:has(input[name="attendance"][value="yes"]:checked) ~ #special-message,
.form-section:has(input[name="attendance"][value="yes"]:checked) ~ .form-section:has(.form-section-title:contains("Special Message")),
.form-section:has(input[name="attendance"][value="yes"]:checked) div:has(#guestCount),
.form-section:has(input[name="attendance"][value="yes"]:checked) div:has(#dietaryRestrictions) {
  display: block !important;
}

/* 5. Styling for conditional sections */
#special-message:has(~ input[name="attendance"][value="yes"]:checked),
#special-message:has(~ #attendanceYes:checked),
body:has(input[name="attendance"][value="yes"]:checked) #special-message,
body:has(#attendanceYes:checked) #special-message {
  padding: 20px !important;
  border-radius: 12px !important;
  background-color: var(--color-background-alt, #f8f9fa) !important;
  box-shadow: var(--shadow-light, 0 0 10px rgba(0,0,0,0.1)) !important;
  margin-bottom: 20px !important;
}

/* 6. Direct targeting by container indices */
body:has(input[name="attendance"][value="yes"]:checked) .form-section:nth-child(3),
body:has(#attendanceYes:checked) .form-section:nth-child(3) {
  display: block !important;
}

/* 7. Mobile-specific fixes */
@media (max-width: 768px) {
  body:has(input[name="attendance"][value="yes"]:checked) #special-message,
  body:has(#attendanceYes:checked) #special-message,
  body:has(input[name="attendance"][value="yes"]:checked) [data-depends-on="attendance"][data-show-when="yes"],
  body:has(#attendanceYes:checked) [data-depends-on="attendance"][data-show-when="yes"] {
    display: block !important;
    padding: 15px !important;
  }
}
.form-check:has(input[value="yes"]:checked) ~ .form-section#special-message,
.form-check:has(input[value="yes"]:checked) ~ .mb-3:has(#guestCount),
.form-check:has(input[value="yes"]:checked) ~ .mb-3:has(#dietaryRestrictions) {
  display: block;
}

/* Special message section specific styles */
#special-message {
  padding: 20px;
  border-radius: 12px;
  background-color: var(--color-background-alt);
  box-shadow: var(--shadow-light);
}

/* Make sure the special message section has a minimum height to be visible */
#special-message {
  min-height: 100px;
}
